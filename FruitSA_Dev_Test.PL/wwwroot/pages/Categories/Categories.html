<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
          crossorigin="anonymous" />
    <title></title>
</head>
<body>


    <h2>Categories List</h2>

    <br />

    <a href="/pages/Categories/NewCategory.html" class="btn btn-secondary"> 
        New Category
    </a>

 

    <br />

    <table class="table table-bg table-striped" id="table">
        <thead class="table-dark">
            <tr>
                <th scope="col" >ID</th>
                <th scope="col">Name</th>
                <th scope="col">Category Code</th>
                <th scope="col">Active</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="table_body">
        </tbody>
    </table>


</body>
</html>

<script>
    "https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity =
        "sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin = "anonymous"
   
    
    fetch("https://localhost:7252/api/Category/GetCategories").then((data) => {
        return data.json();
        }).then((categories) => {
            console.log(categories);
            let tableData = "";
            categories.map((values) => {
                tableData +=
                `<tr>
                    <td id="catId">${values.categoryId}</td>
                    <td>${values.name}</td>
                    <td>${values.categoryCode}</td>
                    <td>${values.isActive}</td>
                    <td>
                        <a href="/pages/Categories/EditCategory.html" class="btn btn-secondary" onclick="getCategory()"> Edit</a>
                    </td>
                </tr>`;
            });
            document.getElementById("table_body").innerHTML = tableData;
    });

    function getCategory() {
        var inputTest = document.querySelector('#catId').value;
        localStorage.setItem('categoryId', inputTest);
    }
</script>

<style>
</style>